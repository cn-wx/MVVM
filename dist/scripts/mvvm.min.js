"use strict";var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Compiler=function(){function r(e,t){if(_classCallCheck(this,r),this.el=this.isElementNode(e)?e:document.querySelector(e),this.vm=t,this.el){var n=this.nodeToFragment(this.el);this.compile(n),this.el.appendChild(n)}}return _createClass(r,[{key:"isElementNode",value:function(e){return 1===e.nodeType}},{key:"compileElement",value:function(a){var o=this,e=a.attributes;Array.from(e).forEach(function(e){var t=e.name;if(o.isDirective(t)){var n=e.value,r=t.split("-"),i=_slicedToArray(r,2)[1];CompileUtil[i](a,o.vm,n)}})}},{key:"compileText",value:function(e){var t=e.textContent;/\{\{([^}]+)\}\}/g.test(t)&&CompileUtil.text(e,this.vm,t)}},{key:"compile",value:function(e){var t=this,n=e.childNodes;Array.from(n).forEach(function(e){t.isElementNode(e)?(t.compileElement(e),t.compile(e)):t.compileText(e)})}},{key:"isDirective",value:function(e){return e.includes("m-")}},{key:"nodeToFragment",value:function(e){for(var t=document.createDocumentFragment(),n=void 0;n=e.firstChild;)t.appendChild(n);return t}}]),r}(),CompileUtil={getVal:function(e,t){return(t=t.split(".")).reduce(function(e,t){return e[t]},e.$data)},getTextVal:function(e,t){var n=this;return t.replace(/\{\{([^}]+)\}\}/g,function(){return n.getVal(e,arguments.length<=1?void 0:arguments[1])})},setVal:function(e,r,i){return(r=r.split(".")).reduce(function(e,t,n){return n===r.length-1?e[t]=i:e[t]},e.$data)},text:function(t,n,r){var i=this,a=this.updater.textUpdater,e=this.getTextVal(n,r);r.replace(/\{\{([^}]+)\}\}/g,function(){new Watcher(n,arguments.length<=1?void 0:arguments[1],function(e){a&&a(t,i.getTextVal(n,r))})}),a&&a(t,e)},model:function(t,n,r){var i=this,a=this.updater.modelUpdater;new Watcher(n,r,function(e){a&&a(t,i.getVal(n,r))}),t.addEventListener("keyup",function(e){var t=e.target.value;i.setVal(n,r,t)}),a&&a(t,this.getVal(n,r))},updater:{textUpdater:function(e,t){e.textContent=t},modelUpdater:function(e,t){e.value=t}}};
"use strict";var _createClass=function(){function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e}}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var Dep=function(){function e(){_classCallCheck(this,e),this.subscribe=[]}return _createClass(e,[{key:"addSubscribe",value:function(e){this.subscribe.push(e)}},{key:"notify",value:function(){this.subscribe.forEach(function(e){return e.update()})}}]),e}();
"use strict";var _createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var MVVM=function(){function t(e){_classCallCheck(this,t),this.$el=e.el,this.$data=e.data,this.$el&&(new Observer(this.$data),this.proxyData(this.$data),new Compiler(this.$el,this))}return _createClass(t,[{key:"proxyData",value:function(n){var e=this;Object.keys(n).forEach(function(t){Object.defineProperty(e,t,{get:function(){return n[t]},set:function(e){n[t]=e}})})}}]),t}();
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Observer=function(){function t(e){_classCallCheck(this,t),this.observe(e)}return _createClass(t,[{key:"observe",value:function(t){var n=this;t&&"object"===(void 0===t?"undefined":_typeof(t))&&Object.keys(t).forEach(function(e){n.defineReactive(t,e,t[e]),n.observe(t[e])})}},{key:"defineReactive",value:function(e,t,n){this.observe();var o=this,r=new Dep;Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return Dep.target&&r.addSubscribe(Dep.target),n},set:function(e){e!=n&&(o.observe(e),n=e,r.notify())}})}}]),t}();
"use strict";var _createClass=function(){function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Watcher=function(){function n(t,e,a){_classCallCheck(this,n),this.vm=t,this.expr=e,this.cb=a,this.value=this.get()}return _createClass(n,[{key:"getVal",value:function(t,e){return(e=e.split(".")).reduce(function(t,e){return t[e]},t.$data)}},{key:"get",value:function(){var t=(Dep.target=this).getVal(this.vm,this.expr);return Dep.target=null,t}},{key:"update",value:function(){var t=this.getVal(this.vm,this.expr);t!=this.value&&this.cb(t)}}]),n}();